@model List<VascoVasconcellos.DAO.Models.Vendas>;
@using VascoVasconcellos.Util.ProjectEnumeratos;
@using VascoVasconcellos.Util;
@{
    Layout = "_Layout";
    ViewData["Title"] = "Relatorio de vendas";
}
@{
	var idOrc = ViewBag.IdOrcamento;
}

<input id="hiddenOrcVal" hidden value="@idOrc" />
<!--begin::Toolbar-->
<div class="toolbar py-5 py-lg-5" id="kt_toolbar">
	<!--begin::Container-->
	<div id="kt_toolbar_container" class="container-xxl d-flex flex-stack flex-wrap">
		<!--begin::Page title-->
		<div class="page-title d-flex flex-column me-3">
			<!--begin::Title-->
			<h1 class="d-flex text-dark fw-bolder my-1 fs-3">Relatorio de vendas</h1>
			<!--end::Title-->
			<!--begin::Breadcrumb-->
			<ul class="breadcrumb breadcrumb-dot fw-bold text-gray-600 fs-7 my-1">
				<!--begin::Item-->
				<li class="breadcrumb-item text-gray-600">
					<a href="@Url.Action("Index", "Orcamentos", new { Area = "Vendas" })" class="text-gray-600 text-hover-primary">Orçamentos</a>
				</li>
				<!--end::Item-->
				<!--begin::Item-->
				<li class="breadcrumb-item text-gray-600">
					<a href="@Url.Action("Index", "Vendas", new { Area = "Vendas" })" class="text-gray-600 text-hover-primary">Vendas</a>
				</li>
				<!--end::Item-->
			</ul>
			<!--end::Breadcrumb-->
		</div>
		<!--end::Page title-->
	</div>
	<!--end::Container-->
</div>
<!--end::Toolbar-->
<!--begin::Post-->
<div class="post d-flex flex-column-fluid" id="kt_post">
	<!--begin::Container-->
	<div id="kt_content_container" class="container-fluid">

		<div class="card card-bordered">
			<!--begin::Card header-->
			<div class="card-header align-items-center py-3 gap-2 gap-md-5">
				<!--begin::Card title-->
				<div class="card-title">
					<h3>Relatorio de vendas</h3>
				</div>
				<!--end::Card title-->
				<!--begin::Card toolbar-->
				<div class="card-toolbar flex-row-fluid justify-content-center gap-5">
					
				
				</div>
				<!--end::Card toolbar-->
				<!--begin::Card toolbar-->
				<div class="card-toolbar flex-row-fluid justify-content-end gap-5">						
					<a href="@Url.Action("Adicionar", "Vendas", new { Area = "Vendas", idOrcamento = idOrc })" class="btn btn-primary">Adicionar</a>
				</div>
				<!--end::Card toolbar-->
			</div>
			<!--end::Card header-->
			<!--begin::Card body-->
			<div class="card-body">
				<!--begin: Datatable-->
				<div class="datatable-standard">
					<table class="table table-striped table-row-bordered table-bordered gy-5 gs-20" id="kt_datatable">
						<thead>
							<tr class="text-uppercase">
								<th class="text-center">Id</th>
								<th class="text-center">OS</th>
								<th class="text-center">Produto</th>
								<th class="text-center">Artigo</th>
								<th class="text-center">Usuario</th>
								<th class="text-center">Quantidade</th>
								<th class="text-center">Valor</th>
								<th class="text-center">Faturamento</th>
								<th class="text-center">Conjunto</th>
								<th class="text-center">Status</th>
								<th class="text-center">Ações</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var venda in Model)
							{
								<tr>
									<td class="text-center">@venda.Id</td>
									<td class="text-center">@venda.OS</td>
									<td class="text-center">@venda.IdProdutoNavigation.Produto</td>
									<td class="text-center">@venda.Artigo</td>
									<td class="text-center">@venda.IdUsuarioNavigation.Nome</td>
									<td class="text-center">@venda.Quantidade</td>
									<td class="text-center">R$ @venda.Valor</td>
									@if(venda.Faturamento == 1)
									{
										<td class="text-center">CV</td>
									}
									else
									{
										<td class="text-center">VV</td>
									}
									<td class="text-center">@venda.Conjunto</td>
									<td class="text-center">@EnumeratorExtensions.GetEnumDisplayName((EnumStatusvenda)venda.Status)</td>
									
									<td nowrap="nowrap" class="text-center">
										<a href="@Url.Action("Editar", "Vendas", new { Area = "Vendas", id = venda.Id })" class="" title="Editar"> <i class="bi bi-pen-fill fs-1"></i> </a>
										<a href="@Url.Action("Visualizar", "Vendas", new { Area = "Vendas", id = venda.Id })" class="" title="Visualizar"> <i class="bi bi-eye-fill fs-1"></i> </a>
										<a href="@Url.Action("Copiar", "Vendas", new { Area = "Vendas", id = venda.Id })" class="" title="Copiar"> <i class="bi bi-bookmarks-fill fs-1"></i> </a>
										<a href="#" id="@venda.Id" class="btnMudarStatus" title="Mudar Status"> <i class="bi bi-arrow-repeat fs-1"></i> </a>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
				<!--end: Datatable-->
			</div>
			<!--end::Card body-->				
		</div>

	</div>
	<!--end::Container-->													
</div>
<!--end::Post-->
<script src="~/js/Areas/Vendas/Vendas/Orcamentos.js" asp-append-version="true"></script>
<script src="~/js/Areas/Vendas/Vendas/Vendas.js" asp-append-version="true"></script>
<script type="text/javascript">
	$(function (){
		OrcamentoAPI.initIndex();
		VendasAPI.initIndex();
	})
</script>